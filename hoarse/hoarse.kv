#:kivy 1.9.1

<HoarseMain>:

	canvas:
		Color:
			rgb: 0.2, 0.2, 0.2
		Rectangle:
			size: root.size
			pos: root.pos

	ScreenManager:
		id: screen_manager
	    Screen:
	    	name: 'competitors-management'
	    	CompetitorsManagementMenu
	    Screen:
	    	name: 'style-menu'
	    	StyleMenu
	    Screen:
	    	name: 'substyle-korean'
	    	SubstyleKoreanMenu
	    Screen:
	    	name: 'run-screen'
	    	on_enter: run_screen.ids["time_input"].focus=True
	    	RunScreen:
	    		id: run_screen
	    Screen:
	    	name: 'result-screen'
	    	ResultScreen:
	    		id: result_screen


<StyleMenu>:
	orientation:'vertical'
	Label:
		text: "Choose your competition style"
		size_hint_y: 0.3
	GridLayout:
		cols: 3
		StyleButton:
			text: "Hungarian style"
			name: "hungarian"
			disabled: False
		StyleButton:
			text: "Korean style"
			name: "korean"
			disabled: False
			# on_press: app.switch_screen("substyle-" + self.name)
		StyleButton:
			text: "Polish track"
			name: "polish"
		StyleButton:
			text: "Qabaq style"
			name: "qabaq"
		StyleButton:
			text: "FFE (French federal styles)"
			name: "FFE"
		StyleButton:
			text: "Combined competitions"
			name: "combined"

<StyleButton>:
	size_hint: (.8, .5)
	background_color: (0, 1, 0, 1)
	disabled: True
	on_press: root.validate(self.name)

<SubstyleKoreanMenu>:
	orientation:'vertical'
	Label:
		text: "Choose your Korean settings"
		size_hint_y: 0.3
	GridLayout:
		cols: 3
		StyleButton:
			text: "Korean 1-2-3"
			name: "k123"
		StyleButton:
			text: "Korean 1-2-5"
			name: "k125"
		StyleButton:
			text: "Korean 2-3-5"
			name: "k235"

<CompetitorsManagementMenu>:

	Label:
		text: "Enter the competitors' names"
		size_hint: (.8, .1)
		pos_hint: {"center_x": .5, "top": 1}

	TextInput:
		id: competitor_input
		multiline: False
		hint_text: "Name / Horse name"
		font_size: 60
		height: self.minimum_height
		size_hint: (.63, None)
		pos_hint: {"x": .1, "top": 0.89}
		on_text_validate: root.add_competitor(self.text)
		on_text: self.foreground_color = (0, 0, 0, 1)

	Button:
		height: competitor_input.height
		size_hint: (.12, None)
		pos_hint: {"right": .9, "top": 0.89}
		text: "Add"
		on_press: root.add_competitor(competitor_input.text)

	BoxLayout:
		size_hint: (.8, .65)
		pos_hint: {"center_x": .5, "top": 0.75}

		id: competitors_list
		orientation: 'vertical'
		spacing: 5
		padding: 5

	Button:
		size_hint: (.15, .05)
		pos_hint: {"right": .95, "y": .02}
		text: "Next"
		on_press: root.validate()
		disabled: root.counter < 2

<CompetitorLine>:
	height: 100
	size_hint_y: None

	canvas:
		Color:
			rgb: (0, 0.3, 0.3)
		Rectangle:
			size: root.size
			pos: root.pos

	Label:
		id: competitorGroup
		size_hint: (.2, 1)
	Label:
		id: name
		size_hint: (.8, 1)


<RunScreen>:
	Button:
		text: "Settings"
		pos_hint: {'right': 0.99, 'top': 0.99}
		size_hint: (.09, .09)

	Button:
		size_hint: (.05, .4)
		pos_hint: {'x' : .02, 'y':.3}
		on_press: root.validate(direction=-1)
	Button:
		size_hint: (.05, .4)
		pos_hint: {'right' : .98, 'y':.3}
		on_press: root.validate()
	Button:
		size_hint: (.4, .05)
		pos_hint: {'x' : .3, 'top':.98}
		on_press: root.validate(by="runs", direction=-1)
	Button:
		size_hint: (.4, .05)
		pos_hint: {'x' : .3, 'y':.02}
		on_press: root.validate(by="runs")

	Label:
		size_hint: (.3, .1)
		pos_hint:{'top': .85, 'x':.2}
		text: root.competitor_text
	Label:
		size_hint: (.3, .1)
		pos_hint:{'top': .75, 'x':.2}
		text: root.run_text
	Label:
		size_hint: (.3, .1)
		pos_hint:{'top': .65, 'x':.2}
		text: root.score_text

	Label:
		size_hint: (.3, .1)
		pos_hint:{'top': .6, 'x':.2}
		text: "Time"
	TextInput:
		id: time_input
		multiline: False
		size_hint: (.3, None)
		pos_hint:{'top': .5, 'x':.2}
		on_text: root.updateScore(targets_input.text, time_input.text)

	Label:
		size_hint: (.3, .1)
		pos_hint:{'top': .6, 'right': .8}
		text: "Target points"
	TextInput:
		id: targets_input
		multiline: False
		size_hint: (.3, None)
		pos_hint:{'top': .5, 'right': .8}
		on_text: root.updateScore(targets_input.text, time_input.text)


<ResultScreen>:
	orientation:'vertical'
	Label:
		text: "Results"
		size_hint: (1, .1)
		pos_hint: {'top' : .98}
	BoxLayout:
		size_hint: (.8, .65)
		pos_hint: {"center_x": .5, "top": 0.75}

		id: results_list
		orientation: 'vertical'
		spacing: 5
		padding: 5


<ResultLine>:
	height: 100
	size_hint_y: None
	Label:
		id: rank
		size_hint: (.1, 1)
	Label:
		id: name
		size_hint: (.7, 1)
	Label:
		id: score
		size_hint: (.2, 1)



<TextInput>:
	font_size: 60
	height: self.minimum_height
